# Password Attack
## 개요
사용자명과 비밀번호는 모의해킹에 있어서 가장 중요한 정보이다. 난공불락의 시스템도 사용자명과 비밀번호가 유출되는 순간 쉽게 접근할 수 있는 시스템이 되어 버릴 정도로 그 가치가 높기 때문이다. 이번 챕터에서는 이러한 계정 정보(credential)을 어떻게 찾아보고 획득한 해쉬를 평문으로 복호화는 법을 알아볼 것이다. 

## default credential 
wordpress, phpmyadmin 등 서비스를 구성하거나 서비스를 직접적으로 제공하는 소프트웨어 중에서 로그인 기능을 제공하는 경우 세팅을 위한 기본 계정을 제공한다. 관리자의 귀찮음과 부주의로 기본 계정을 변경하지 않는 경우 손쉽게 시스템으로 접근할 수 있다. 

## 평문 비밀번호
평문 비밀번호는 다음의 경우로 발견되는 경우가 더러 있다. 

- 웹서비스의 연결을 위한 설정 파일
    - config.php, db.php 등 db나 다른 서비스와의 연결을 위해 
    - git config --list
- 환경 변수
    - .env 파일
    - .dockerenv 파일
    - env, printenv 명령어
- 초기 개발단계
    - .git이 있는 경우 git log를 통해 지난 로그를 확인할 수 있다. 
    - git show 명령어를 통해 log를 자세히 들여다 볼 수 있다. 

어떤 파일을 볼지는 환경에 따라 달라지는 것이므로 어떤 환경인지 파악하는 것이 중요하고 그에 맞는 파일 탐색이 이루어지는 것이 올바르다. 본인이 웹개발 지식이 부족한 경우 AI의 도움을 받으면 쉽게 파악이 가능하다. 
ex) 웹 디렉토리 구조 및 파일명을 보고 spring boot 환경이라 판단. => pom.xml에는 버젼이, application.properties에는 계정 정보가 있을 수 있다는 것을 파악한다. 

## hash cracking 
hash화 된 비밀번호를 획득한 경우 이를 다시 평문으로 되돌리는 크래킹 과정을 거쳐야 한다. (종종 hash를 파라미터로 받는 로그인 시스템도 발견된다. 이 경우엔 복호화가 필요없다.) 크래킹하는 과정은 다음과 같다. 

1. 해쉬 알고리즘을 파악한다. 
    - hashid를 사용하면 어떤 알고리즘이 적용되었는지 후보를 보여준다. 
    - AI를 사용하면 해당 hash가 어떤 알고리즘을 통해 hash로 만들어진 것인지 알려준다. 

2. 크래킹에 사용할 단어장을 선택한다. 
    - 특별히 다른 단서가 없는 경우 일반적으로는 /usr/share/wordlists/rockyou.txt를 사용한다. (최초 사용시 압축 풀어야 함)

3. 크래킹을 시도한다. 
    - john --wordlist=/usr/share/wordlists/rockyou.txt [파일명]
    - hashcat -m [알고리즘 번호]  [파일명] --wordlist=/usr/share/wordlists/rockyou.txt

크래킹을 시도한 뒤 3분이 지나도 원문을 구해지지 않았다면 크래킹이 불가능한 hash로 판단하고 다른 방법을 찾도록 한다.