# Using Exploit
## 들어가며 
개발자가 프로그램을 개발할 때 C코드를 사용하지 않고 라이브러리, 프레임워크 등을 이용하여 개발하는 것과 같이 펜테스터도 주로 취약점을 스스로 찾기보다는 기존에 발견되어 있는 취약점 문서와 exploit을 사용한다. 또한 개발자가 라이브러리와 프레임워크 공부를 따로 하듯 우리도 exploit을 올바르게 사용하기 위하여 exploit을 찾고 수정하여 올바르게 적용하는 것까지 알아보도록 하겠다.

### exploit이란?
exploit은 **특정 취약점**에 대해 공격을 진행해주는 프로그램 혹은 스크립트를 말한다. 

## Locating Exploit
등록된 취약점과 exploit을 찾으려면 다음의 정보들이 필요하다.

- 소프트웨어 명
- 버젼
- 환경 
- 취약점 종류 

예를 들어 
![alt text](image-3.png)

위와 같은 결과에서 우리는 웹서버 명칭이 apache라는 것과 해당 버젼이 2.4.49라는 것을 알 수 있다. 

이러한 정보를 토대로 우리는 다음의 방법으로 취약점과 exploit을 검색할 수 있다.
- searchsploit (exploit db)
- googling 
    - hacktrick
    - github
    - 기타 사이트
### searchsploit

searchsploit은 kali linux에 내제된 명령어로 exploit db라는 취약점과 exploit을 저장하고 있는 db에 검색하는 기능을 가지고 있다. 

아까의 예시로 다시 돌아와서 searchsploit을 사용하면 아래와 같이 결과를 얻을 수 있다.

2.4.49에 RCE 취약점 있다는 것을 확인할 수 있다. 아래의 명령어로 exploit을 현재 디렉토리로 복사할 수 있다. 

```bash
searchsploit -m [exploit_number]
```

searchsploit은 exploit db와 동일한 검색 결과를 가져오기 때문에 해당 내용을 exploit db 사이트에서도 확인할 수 있다. 


### googling 
- hacktrick : pentest를 위한 유명한 공략집과 같은 사이트이다. 
- github : 개인이 제작한 exploit이 주로 있다. CVE 번호가 있는 것을 사용하는 것을 추천하며 **본인이 exploit의 내용을 확인**하고 실행할 필요가 있다. (악성코드 감염 우려)

## Fixing Exploit

exploit을 내용을 확인하고 실행했음에도 정상적으로 동작하지 않거나 공격에 실패할 때가 있다. 그러한 경우 해당 exploit이 실패하는 지점이 어디인지 파악하는 것이 중요하다. 그 부분의 문제를 찾고 상황 맞게 exploit을 수정하여 공격에 성공하는 것이 중요한 역량 중 하나이다. 

그러나 exploit을 수정하는 과정에서 해당 환경에서는 사용하고 있는 exploit이 무효하다는 것을 알게 된다면 해당 공격을 포기하고 다른 방법을 찾으면 된다. 

## 과제 
1. Sau.htb의 user shell을 획득하시오
2. 공격에 사용된 exploit(혹은 취약점)을 분석하고 설명하시오